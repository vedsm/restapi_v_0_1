<!-- views/login.ejs -->
<!doctype html>
<html>
<head>
    <title>Node Authentication</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css"> <!-- load bootstrap css -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css"> <!-- load fontawesome -->
    <style>
        body        { padding-top:80px; }
    </style>
</head>
<body onload="getLocation()">
<div class="container">

    <div class="col-sm-6 col-sm-offset-3">

        <h1><span class="fa fa-sign-in"></span> Login</h1>

        <!-- show any messages that come back with authentication -->
        <% if (message.length > 0) { %>
        <div class="alert alert-danger"><%= message %></div>
        <% } %>

        <!-- LOGIN FORM -->
        <form action="/fblogin" method="post">
            <div class="form-group">
                <label>fbid</label>
                <input type="text" class="form-control" name="fbid">
            </div>
            <div class="form-group">
                <label>token</label>
                <input type="text" class="form-control" name="token">
            </div>
            <div class="form-group">
                <label>name</label>
                <input type="text" class="form-control" name="name">
            </div>
            <div class="form-group">
                <label>email</label>
                <input type="text" class="form-control" name="email">
            </div>

            <div class="form-group">
                <label id="locationbox">location</label>
                <input type="text" class="form-control" name="location">
            </div>

            <div class="form-group" >
                <label>misc</label>
                <input type="text" class="form-control" name="misc">
            </div>

            <button type="submit" class="btn btn-warning btn-lg">Login</button>
        </form>

        <button type="submit" class="btn btn-warning btn-lg" id="locationfinderbtn">getlocatiion</button>

        <hr>

        <p>Need an account? <a href="/fbsignup">Signup</a></p>
        <p>Or go <a href="/">home</a>.</p>

    </div>

</div>
</body>
</html>
<script>
    var x = document.getElementById("locationbox");
    function getLocation() {
        console.log("inside getLocation() function");
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else {
            x.innerHTML = "Geolocation is not supported by this browser.";
        }
    }
    function showPosition(position) {
        x.innerHTML = "Latitude: " + position.coords.latitude +
                "<br>Longitude: " + position.coords.longitude;
    }
</script>